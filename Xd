local http = require("socket.http")
local json = require("dkjson")

-- Substitua pela sua chave de API gratuita do OpenWeatherMap
local API_KEY = "SUA_CHAVE_API"
local BASE_URL = "http://api.openweathermap.org/data/2.5/weather"

local function get_weather(city)
    local url = string.format("%s?q=%s&appid=%s&units=metric&lang=pt_br", BASE_URL, city, API_KEY)
    local body, code = http.request(url)
    if code ~= 200 then
        print("Erro ao buscar dados do tempo. Código HTTP:", code)
        return nil
    end
    local data = json.decode(body)
    return data
end

local function show_dashboard(city)
    local weather = get_weather(city)
    if not weather then
        print("Não foi possível obter os dados meteorológicos.")
        return
    end

    print("Cidade: " .. (weather.name or "Desconhecida"))
    print("Temperatura: " .. (weather.main and weather.main.temp and (weather.main.temp .. "°C") or "N/A"))
    print("Clima: " .. (weather.weather and weather.weather[1] and weather.weather[1].description or "N/A"))
    print("Umidade: " .. (weather.main and weather.main.humidity and (weather.main.humidity .. "%") or "N/A"))
    print("Vento: " .. (weather.wind and weather.wind.speed and (weather.wind.speed .. " m/s") or "N/A"))
end

-- Exemplo de uso:
-- show_dashboard("São Paulo")
